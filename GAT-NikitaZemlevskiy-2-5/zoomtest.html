
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <script src="http://kartograph.org/js/chroma.min.js"></script>
    <script src="http://kartograph.org/js/jquery.min.js"></script>
    <script src="http://kartograph.org/js/raphael.min.js"></script>
    <script src="http://kartograph.org/js/kartograph.min.js"></script>
    <script type="text/javascript" src="http://kartograph.org/showcase/panzoom/raphael.pan-zoom.min.js"></script>
</head>
<body>

<script type="text/javascript" src="htttp://kartograph.org/js/chroma.min.js"></script>
<script type="text/javascript">
        $(document).ready(function() {
            //need to figure out how to get these variables from regionalization code to here - question for vinay.
            var regions = {"Florida": 7, "Montana": 3, "Indiana": 0, "Michigan": 2, "Rhode Island": 1, "Kansas": 2, "South Dakota": 3, "Wisconsin": 2, "North Carolina": 7, "Georgia": 7, "Connecticut": 1, "Arizona": 5, "Massachusetts": 1, "Iowa": 3, "Oklahoma": 4, "West Virginia": 0, "New Mexico": 4, "South Carolina": 7, "Idaho": 4, "Delaware": 1, "Tennessee": 6, "Missouri": 2, "Nevada": 4, "Maine": 1, "Vermont": 1, "Virginia": 1, "Colorado": 5, "Minnesota": 2, "Nebraska": 2, "Louisiana": 6, "New Jersey": 1, "Wyoming": 3, "Arkansas": 6, "New Hampshire": 1, "Illinois": 2, "Maryland": 1, "Pennsylvania": 0, "Oregon": 5, "North Dakota": 3, "Kentucky": 0, "New York": 1, "Utah": 4, "California": 5, "Washington": 5, "Ohio": 0, "Texas": 6, "Alabama": 7, "Mississippi": 6};
            var length = Object.keys(regions).length;
            //num regions=7
            color = chroma.scale('Reds').domain([0, 7]);
            console.log(length)
            var i = 0;
            /*for (i = 0; i < length; i++){
                console.log(color(i));
            }*/
            //initialization
            map = kartograph.map('#map');
            map.loadMap('mymap.svg', function() {
                map.addLayer('mylayer',{
                    styles: {
                            'stroke-width': 0.7,
                            fill: function(d) { return color(regions[d.id]); },
                            stroke: function(d) { return color(regions[d.id]).darker(); }
                    },
                });

                initPanZoom();
            });



    		function initPanZoom() {
	    		var panZoom = map.paper.panzoom();
		    	panZoom.enable()

		        setInterval(function() {
		    	    $('h1').html(panZoom.currZoom +' x:'+panZoom.currPos.x.toFixed(0)+' y:'+panZoom.currPos.y.toFixed(0));
		        }, 50);
		        //cursor
		        var css = '<style type="text/css">.grabbing { cursor: url(data:image/x-icon;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAAH/AAAB/wAAA/0AAANsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//+AB///wAf//4AH//+AD///yT/////////////////////////////8=), pointer !important; } .map-controls div { cursor:pointer; font-size: 20px; color: #777; font-weight:bold; font-family: Helvetica; line-height: 28px; text-align:center;border: 1px solid #bbb; } .map-controls div:hover { border: 1px solid #999; color: #000; }</style>';
		        $('body').append(css);

		        //pan zoom controls up and down
		        var ctrls = $('<div />'), up = $('<div>+</div>'), down = $('<div>âˆ’</div>');
		        ctrls
    		    	.addClass('map-controls')
    		    	.css({ position: 'absolute', top: 20, left: 20, 'z-index': 1000 })
    		    	.append(up).append(down);
    		    up.css({ 'border-radius': '14px 14px 0 0', width: 28, height: 28, position: 'absolute',
    		    	top: 0, left: 0, background: '#fff' });
	    	   	down.css({ 'border-radius': '0 0 14px 14px', width: 28, height: 28, position: 'absolute',
		        	top: 29, left: 0, background: '#fff' });

		        $('#map').parent().append(ctrls);

		        up.click(function (e) {
		            panZoom.zoomIn(1);
		            e.preventDefault();
		        });
		        down.click(function (e) {
    		        panZoom.zoomOut(1);
	    	        e.preventDefault();
		        });
		    }
        });

</script>
<div id="map"></div>
</body>
</html>
